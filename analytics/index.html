<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Realtime Analytics</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <style>
:root{--sidebar-width:250px;--primary-color:#4361ee;--secondary-color:#3a0ca3;--success-color:#4cc9f0;--light-bg:#f8f9fa;--dark-bg:#212529}body{font-family:'Segoe UI',Tahoma,Geneva,Verdana,sans-serif;background-color:#f5f7fb;overflow-x:hidden}.sidebar{width:var(--sidebar-width);height:100vh;position:fixed;top:0;left:0;background:linear-gradient(180deg,var(--primary-color) 0,var(--secondary-color) 100%);color:white;z-index:1000;box-shadow:2px 0 10px rgba(0,0,0,0.1);transition:all .3s}.sidebar-header{padding:1.5rem 1rem;border-bottom:1px solid rgba(255,255,255,0.1)}.sidebar-header h3{font-weight:600;margin:0;font-size:1.2rem}.app-item{border:0;border-radius:.5rem;margin-bottom:.25rem;background:transparent;color:rgba(255,255,255,0.8);transition:all .2s;cursor:pointer}.app-item:hover,.app-item.active{background:rgba(255,255,255,0.1);color:white}.main-content{margin-left:var(--sidebar-width);padding:1.5rem;min-height:100vh}.dashboard-header{background:white;border-radius:.5rem;padding:1.5rem;margin-bottom:1.5rem;box-shadow:0 2px 10px rgba(0,0,0,0.05)}.stat-card{background:white;border-radius:.5rem;padding:1.5rem;margin-bottom:1.5rem;box-shadow:0 2px 10px rgba(0,0,0,0.05);transition:transform .2s}.stat-card:hover{transform:translateY(-5px)}.stat-period{font-size:.9rem;color:#6c757d;font-weight:600;text-transform:uppercase;letter-spacing:1px}.stat-value{font-size:2rem;font-weight:700;color:var(--primary-color);margin:.5rem 0}.stat-label{font-size:.9rem;color:#6c757d}.chart-panel{background:white;border-radius:.5rem;padding:1.5rem;margin-bottom:1.5rem;box-shadow:0 2px 10px rgba(0,0,0,0.05)}.chart-container{position:relative;width:100%;height:18.75rem}.users-panel{background:white;border-radius:.5rem;padding:1.5rem;margin-bottom:1.5rem;box-shadow:0 2px 10px rgba(0,0,0,0.05)}.user-card,.total-user,.country-card{background:white;height:500px;width:100%;overflow:hidden;padding:1.5rem;margin-bottom:1.5rem;box-shadow:0 2px 10px rgba(0,0,0,0.05);position:relative}.user-card h5,.total-user h5,.country-card h5{border-bottom:1px solid #099;padding-bottom:15px}#total-user-count{height:400px;width:100%;font-size:5rem;font-weight:900;color:#09f;display:flex;justify-content:center;align-items:center}#users-list,#country-list{height:350px;overflow-y:auto}#country-list div{padding:5px}.user-item{cursor:pointer;box-shadow:0 1px 0 rgba(0,0,0,0.2);padding:10px}.user-item:hover{background:rgba(0,0,0,0.1);.user-item-overlay{opacity:.3}}.user-item-overlay{position:absolute;top:0;left:0;right:0;bottom:0;background-size:25% 100%;background-position:center;background-repeat:no-repeat;opacity:.05;z-index:0;pointer-events:none}.country-flag{width:20px;height:20px;border-radius:50%;box-shadow:1px 1px 2px 1px rgba(0,0,0,0.3);margin-right:5px}.mini-country-flag{width:15px;height:10px;border-radius:3px;box-shadow:0 2px 1px rgba(0,0,0,0.3)}.last-seen{font-size:.8rem;color:#6c757d}.toggle-offline{display:flex;justify-content:right;align-items:center;gap:.5rem;margin-bottom:10px}#daily-new,#weekly-new,#monthly-new{color:#4cc9f0}#daily-online,#weekly-online,#monthly-online{color:#3a0ca3}#daily-returning,#weekly-returning,#monthly-returning{color:#f72585}h5 i{color:#099}.loading-overlay{position:absolute;top:0;left:0;width:100%;height:100%;background:rgba(255,255,255,1);display:flex;justify-content:center;align-items:center;z-index:10;border-radius:.5rem}.loading-spinner{width:40px;height:40px;border:4px solid #f3f3f3;border-top:4px solid #099;border-radius:50%;animation:spin 1s linear infinite}@keyframes spin{0{transform:rotate(0)}100%{transform:rotate(360deg)}}.loading-text{margin-top:10px;font-size:.9rem;color:#6c757d}.loading-container{display:flex;flex-direction:column;align-items:center}@media(max-width:1023px){.sidebar{width:100%;height:auto;position:relative}.main-content{margin-left:0}.chart-container{height:15.625rem}.total-user{height:200px}#total-user-count{height:100px}}.search-container{display:block}.apps-container{max-height:300px;overflow-y:auto}.apps-container.collapsed{max-height:150px;overflow-y:hidden}.apps-container::-webkit-scrollbar{width:6px}.apps-container::-webkit-scrollbar-track{background:rgba(255,255,255,0.1);border-radius:3px}.apps-container::-webkit-scrollbar-thumb{background:rgba(255,255,255,0.3);border-radius:3px}.apps-container::-webkit-scrollbar-thumb:hover{background:rgba(255,255,255,0.5)}@media(min-width:1024px){.search-container{display:block}.apps-container{max-height:none !important;overflow-y:visible !important}#toggle-apps{display:none !important}}@media(max-width:1023px){.sidebar{width:100%;height:auto;position:relative;padding-bottom:1rem}.apps-container.collapsed .app-item:nth-child(n+4){display:none}.main-content{margin-left:0}}


    </style>
</head>
<body>
	<!-- Sidebar -->
	<div class="sidebar">
		<div class="sidebar-header">
			<h3>Realtime Analytics</h3>
		</div>
		<div class="sidebar-content p-3">
			<!-- Input Pencarian -->
			<div class="search-container mb-3">
				<div class="input-group input-group-sm">
					<span class="input-group-text bg-light border-0">
						<i class="fas fa-search text-muted"></i>
					</span>
					<input type="text" class="form-control border-0 bg-light" id="app-search" placeholder="Cari project...">
				</div>
			</div>
			
			<h6 class="text-uppercase text-white-50 small mb-3">Pilih Project</h6>
			
			<!-- Container untuk Apps List dengan Scroll -->
			<div class="apps-container" id="apps-container">
				<ul class="list-group list-group-flush" id="apps-list">
					<!-- Loading state for apps list -->
					<div class="loading-container">
						<div class="loading-spinner"></div>
						<div class="loading-text text-white">Memuat daftar aplikasi...</div>
					</div>
				</ul>
			</div>
			
			<!-- Tombol Toggle untuk Mobile -->
			<div class="d-lg-none mt-3">
				<button class="btn btn-outline-light btn-sm w-100" id="toggle-apps">
					<i class="fas fa-chevron-down me-1"></i> Lihat Semua
				</button>
			</div>
		</div>
	</div>
    
    <!-- Main Content -->
    <div class="main-content">
        <!-- Dashboard Header -->
        <div class="dashboard-header">
            <div class="d-flex justify-content-center align-items-center">
                <h2 id="app-title">Realtime Analytics</h2>
            </div>
        </div>
        
        <!-- User Section -->
        <div class="row">
            <div class="col-lg-4">
                <div class="total-user">
                    <h5 class="mb-3"><i class="fa-solid fa-users-viewfinder"></i> Jumlah Pengguna</h5>
                    <div class="position-relative">
                        <p class="d-flex justify-content-center align-items-center" id="total-user-count">0</p>
                        <!-- Loading state for total users -->
                        <div class="loading-overlay" id="total-users-loading">
                            <div class="loading-container">
                                <div class="loading-spinner"></div>
                                <div class="loading-text">Memuat jumlah pengguna...</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Daftar Pengguna -->
            <div class="col-lg-4">
                <div class="user-card">
                    <div class="user-card-header d-flex flex-column">
                        <h5 class="mb-3" id="users-title"><i class="fa-solid fa-users"></i> Daftar Pengguna</h5>
                        <div class="toggle-offline">
                            <input type="checkbox" class="btn-check" id="show-offline" autocomplete="off">
                            <label class="btn btn-outline-primary btn-sm" id="show-offline-label" for="show-offline">Loading...</label>
                        </div>
                    </div>
                    <div class="position-relative" style="height: 100%;">
                        <div class="list-group" id="users-list" style="height: 350px; overflow-y: auto; position: relative;">
                            <!-- Loading state for users list -->
							<div id="users-list-virtual" style="position: relative;"></div>
							<div class="loading-overlay" id="users-list-loading">
								<div class="loading-container" style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);">
									<div class="loading-spinner"></div>
									<div class="loading-text">Memuat daftar pengguna...</div>
								</div>
							</div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Daftar Negara -->
            <div class="col-lg-4">
                <div class="country-card">
                    <h5 class="mb-3" id="countries-title"><i class="fa-solid fa-earth-europe"></i> Daftar Negara</h5>
                    <div class="position-relative" style="height: 100%;">
                        <div class="list-group" id="country-list">
                            <!-- Loading state for country list -->
                            <div class="loading-container" style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);">
                                <div class="loading-spinner"></div>
                                <div class="loading-text">Memuat daftar negara...</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Statistik Cards -->
        <div class="row">
            <!-- Harian -->
            <div class="col-md-6 col-lg-4">
                <div class="stat-card position-relative">
                    <!-- Loading state for daily stats -->
                    <div class="loading-overlay" id="daily-stats-loading">
                        <div class="loading-container">
                            <div class="loading-spinner"></div>
                            <div class="loading-text">Memuat statistik harian...</div>
                        </div>
                    </div>
                    <div class="stat-period"><i class="fa-solid fa-calendar"></i> Hari ini</div>
                    <div class="row text-center">
                        <div class="col-4 mt-3">
                            <div class="stat-value" id="daily-new">0</div>
                            <div class="stat-label">Pengguna baru</div>
                        </div>
                        <div class="col-4 mt-3">
                            <div class="stat-value" id="daily-online">0</div>
                            <div class="stat-label">Pengguna Online</div>
                        </div>
                        <div class="col-4 mt-3">
                            <div class="stat-value" id="daily-returning">0</div>
                            <div class="stat-label">Pengguna Kembali</div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Mingguan -->
            <div class="col-md-6 col-lg-4">
                <div class="stat-card position-relative">
                    <!-- Loading state for weekly stats -->
                    <div class="loading-overlay" id="weekly-stats-loading">
                        <div class="loading-container">
                            <div class="loading-spinner"></div>
                            <div class="loading-text">Memuat statistik mingguan...</div>
                        </div>
                    </div>
                    <div class="stat-period"><i class="fa-solid fa-calendar"></i> Minggu ini</div>
                    <div class="row text-center">
                        <div class="col-4 mt-3">
                            <div class="stat-value" id="weekly-new">0</div>
                            <div class="stat-label">Pengguna baru</div>
                        </div>
                        <div class="col-4 mt-3">
                            <div class="stat-value" id="weekly-online">0</div>
                            <div class="stat-label">Pengguna Online</div>
                        </div>
                        <div class="col-4 mt-3">
                            <div class="stat-value" id="weekly-returning">0</div>
                            <div class="stat-label">Pengguna Kembali</div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Bulanan -->
            <div class="col-md-6 col-lg-4">
                <div class="stat-card position-relative">
                    <!-- Loading state for monthly stats -->
                    <div class="loading-overlay" id="monthly-stats-loading">
                        <div class="loading-container">
                            <div class="loading-spinner"></div>
                            <div class="loading-text">Memuat statistik bulanan...</div>
                        </div>
                    </div>
                    <div class="stat-period"><i class="fa-solid fa-calendar"></i> Bulan Ini</div>
                    <div class="row text-center">
                        <div class="col-4 mt-3">
                            <div class="stat-value" id="monthly-new">0</div>
                            <div class="stat-label">Pengguna baru</div>
                        </div>
                        <div class="col-4 mt-3">
                            <div class="stat-value" id="monthly-online">0</div>
                            <div class="stat-label">Pengguna Online</div>
                        </div>
                        <div class="col-4 mt-3">
                            <div class="stat-value" id="monthly-returning">0</div>
                            <div class="stat-label">Pengguna Kembali</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Chart Section -->
        <div class="row">
            <!-- Chart Harian -->
            <div class="col-lg-6">
                <div class="chart-panel position-relative">
                    <!-- Loading state for daily chart -->
                    <div class="loading-overlay" id="daily-chart-loading">
                        <div class="loading-container">
                            <div class="loading-spinner"></div>
                            <div class="loading-text">Memuat chart harian...</div>
                        </div>
                    </div>
                    <div class="chart-container">
                        <canvas id="dailyChart"></canvas>
                    </div>
                </div>
            </div>
            
            <!-- Chart Mingguan -->
            <div class="col-lg-6">
                <div class="chart-panel position-relative">
                    <!-- Loading state for weekly chart -->
                    <div class="loading-overlay" id="weekly-chart-loading">
                        <div class="loading-container">
                            <div class="loading-spinner"></div>
                            <div class="loading-text">Memuat chart mingguan...</div>
                        </div>
                    </div>
                    <div class="chart-container">
                        <canvas id="weeklyChart"></canvas>
                    </div>
                </div>
            </div>
            
            <!-- Chart Bulanan -->
            <div class="col-lg-6">
                <div class="chart-panel position-relative">
                    <!-- Loading state for monthly chart -->
                    <div class="loading-overlay" id="monthly-chart-loading">
                        <div class="loading-container">
                            <div class="loading-spinner"></div>
                            <div class="loading-text">Memuat chart bulanan...</div>
                        </div>
                    </div>
                    <div class="chart-container">
                        <canvas id="monthlyChart"></canvas>
                    </div>
                </div>
            </div>
            
            <!-- Chart Negara -->
            <div class="col-lg-6">
                <div class="chart-panel position-relative">
                    <!-- Loading state for country chart -->
                    <div class="loading-overlay" id="country-chart-loading">
                        <div class="loading-container">
                            <div class="loading-spinner"></div>
                            <div class="loading-text">Memuat chart negara...</div>
                        </div>
                    </div>
                    <div class="chart-container">
                        <canvas id="countryChart"></canvas>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="./jquery-3.6.0.min.js"></script>
    <script type="module" src="./analytics-dashboard.min.js" ></script>
</body>
</html>