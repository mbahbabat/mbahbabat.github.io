self.onmessage=function(e){const t=e.data;let a=("string"==typeof t?t:"").split("\n"),s=new Set,i=[],l=[];a.forEach(((e,t)=>{const a=t+1,o=/([a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)/gi;let n,r=0;for(;null!==(n=o.exec(e));){const t=e.substring(r,n.index).trim();t.length>0&&i.push({lineNumber:a,text:t,message:"Not a valid email format (extraneous text)",color:"#ff3399"});let m=n[0].trim();if(r=o.lastIndex,0===m.length)continue;const f=/@gmail\.com$/i;if(!/^([a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+)@([a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)$/.test(m)){i.push({lineNumber:a,text:m,message:"Invalid email format",color:"#ff3399"});continue}const c=m.split("@")[0];if(/[^a-zA-Z0-9._-]/.test(c))i.push({lineNumber:a,text:m,message:"Contains invalid characters in local part",color:"#ffaa00"});else if(f.test(m))s.has(m.toLowerCase())?i.push({lineNumber:a,text:m,message:"Duplicate email",color:"#00ffff"}):(l.push(m),s.add(m.toLowerCase()));else{const e=m.split("@")[1];i.push({lineNumber:a,text:m,message:`Wrong domain: ${e}`,color:"#9900ff"})}}const m=e.substring(r).trim();m.length>0&&i.push({lineNumber:a,text:m,message:"Not a valid email format (extraneous text)",color:"#ff3399"})})),self.postMessage({validEmails:l,invalidEmails:i})};